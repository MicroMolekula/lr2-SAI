Если аккаунт = зарегистрирован то пользователь = гость
Если аккаунт = не_зарегистрирован то пользователь = клиент
Если пользователь = гость то номер = занят
Если пользователь = клиент то номер = свободен
Если номер = свободен то заказ = просматривается
Если номер = занят то заказ = отклоняется
Если заказ = отклоняется то бронь = отменяется
Если заказ = просматривается то бронь = создаётся
Если бронь = создаётся и пользователь = клиент то оплата = оплачивается
Если бронь = отменяется и пользователь = гость то оплата = отменяется
Если оплата = оплачивается то ключи = выдаются
Если оплата = отменяется то ключи = не_выдаются
Если ключи = не_выдаются то заселение = отменяется
Если ключи = выдаются и пользователь = клиент то заселение = ожидается